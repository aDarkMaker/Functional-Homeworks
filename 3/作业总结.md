# 泛函程序设计原理 作业三 - 完成总结

## 实现的功能

### 1. 高阶函数 toInt
- **功能**: 将基数b的int list转换为整数值
- **类型**: `int -> int list -> int`
- **实现要点**:
  - 使用递归和累加器模式
  - 从最低位开始计算，每次乘以基数的幂次
  - 包含输入验证，确保数字在有效范围内
- **示例**: `toInt 2 [0;1] = 2` (1×2¹ + 0×2⁰ = 2)

### 2. 高阶函数 toBase
- **功能**: 将十进制数n转换为b进制的int list
- **类型**: `int -> int -> int list`
- **实现要点**:
  - 使用除法和取余运算
  - 递归地将十进制数转换为目标基数
  - 处理特殊情况（如n=0）
- **示例**: `toBase 5 42 = [1;3;2]` (42₁₀ = 132₅)

### 3. 高阶函数 convert
- **功能**: 实现任意基数b1到b2的转换
- **类型**: `int * int -> int list -> int list`
- **实现要点**:
  - 先使用toInt将源基数转换为十进制
  - 再使用toBase将十进制转换为目标基数
  - 保证数值等价性
- **数学性质**: `toInt b₂ (convert (b₁,b₂) L) = toInt b₁ L`

## 数学原理

### 位置记数法
数字在基数b中的值计算公式：
\[ \sum_{i=1}^{n} b^{i-1} \cdot d_i \]

其中：
- b 是基数
- dᵢ 是第i位的数字
- n 是总位数

### 转换策略
1. **任意进制 → 十进制**: 直接使用位置记数法公式
2. **十进制 → 任意进制**: 使用除法和取余运算
3. **任意进制 → 任意进制**: 先转十进制，再转目标进制

## 测试验证

### 测试用例覆盖
1. **toInt函数测试**:
   - 二进制: [0,1] → 2
   - 十进制: [4,5] → 54
   - 五进制: [1,3,2] → 42

2. **toBase函数测试**:
   - 10 → 二进制: [1,0,1,0]
   - 42 → 五进制: [1,3,2]
   - 123 → 十进制: [1,2,3]

3. **convert函数测试**:
   - 十进制到五进制: [4,2]₁₀ → [1,3,2]₅
   - 五进制到二进制: [1,3,2]₅ → [1,0,1,0,1,0]₂
   - 二进制到十进制: [1,0,1,0]₂ → [1,0]₁₀

4. **等价性验证**:
   - 验证转换前后数值相等
   - 验证往返转换的等价性

## 文件结构

```
3/
├── base_conversion.ml      # 完整实现和详细测试
├── online_test.ml         # 在线测试版本
├── README.md              # 详细说明文档
├── install_ocaml.md       # OCaml安装说明
└── 作业总结.md            # 本文件
```

## 运行方式

### 本地运行
```bash
# 安装OCaml后
ocaml base_conversion.ml
```

### 在线测试
使用 [Try OCaml](https://try.ocamlpro.com/) 等在线环境运行 `online_test.ml`

## 技术特点

1. **函数式编程**: 使用递归、高阶函数、模式匹配
2. **类型安全**: 严格的类型检查
3. **错误处理**: 输入验证和异常处理
4. **可读性**: 清晰的函数命名和注释
5. **测试完备**: 全面的测试用例覆盖

## 学习收获

1. **高阶函数**: 理解函数作为参数和返回值的使用
2. **递归编程**: 掌握递归思维和尾递归优化
3. **数学建模**: 将数学概念转化为程序实现
4. **测试驱动**: 通过测试验证实现的正确性
5. **文档编写**: 清晰的代码文档和说明
